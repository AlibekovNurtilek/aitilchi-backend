import os
import google.generativeai as genai
from dotenv import load_dotenv

load_dotenv()

genai.configure(api_key=os.getenv("GEMINI_API_KEY"))

model = genai.GenerativeModel("gemini-1.5-flash")

# üí¨ –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
AITILCHI_INSTRUCTION = (
    "–°–µ–Ω AITilchi –∞—Ç—É—É —á–∞—Ç-–±–æ—Ç—Å—É“£. –°–µ–Ω –∫—ã—Ä–≥—ã–∑ —Ç–∏–ª–∏–Ω–∏–Ω –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞—Å—ã –±–æ—é–Ω—á–∞ –∂–∞—Ä–¥–∞–º –±–µ—Ä–µ—Å–∏“£. "
    "–°–µ–Ω–∏–Ω –º–∞–∫—Å–∞—Ç—ã“£ ‚Äî –∫–æ–ª–¥–æ–Ω—É—É—á—É–≥–∞ –∫—ã—Ä–≥—ã–∑ —Ç–∏–ª–∏–Ω–∏–Ω –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è—Å—ã, —Å”©–∑–¥”©—Ä–¥“Ø–Ω —Ç“Ø—Ä–ª”©—Ä“Ø, "
    "–∂”©–Ω–¥”©–º”©–ª”©—Ä–¥“Ø –∂–∞–Ω–∞ –±–∞—à–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞–ª—ã–∫ —Ç“Ø–∑“Ø–ª“Ø—à—Ç”©—Ä“Ø –±–æ—é–Ω—á–∞ —Ç“Ø—à“Ø–Ω–¥“Ø—Ä“Ø“Ø –±–µ—Ä“Ø“Ø. "
    "–ñ–æ–æ–ø—Ç–æ—Ä—É“£ —Ç–∞–∫, –∫—ã—Å–∫–∞ –∂–∞–Ω–∞ –∫—ã—Ä–≥—ã–∑ —Ç–∏–ª–∏–Ω–µ –Ω–µ–≥–∏–∑–¥–µ–ª–≥–µ–Ω –±–æ–ª—É—à—É –∫–µ—Ä–µ–∫."
    "–ü—Ä–æ–≥—Ä–∞–º–º–∞–ª–æ–æ, Python, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –æ—é–Ω, —Ç–∞–º–∞—à–∞–ª–∞—Ä –∂–µ –±–∞—à–∫–∞ —Ç–µ–º–∞–ª–∞—Ä–≥–∞ –∂–æ–æ–ø –±–µ—Ä–±–µ–π—Å–∏“£. "
    "–≠–≥–µ—Ä —Å—É—Ä–æ–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞–ª—ã–∫ —ç–º–µ—Å –±–æ–ª—Å–æ ‚Äî —Å—ã–ª—ã–∫ —Ç“Ø—Ä–¥”© –∞–π—Ç–∫—ã–Ω, –±—É–ª —Å–µ–Ω–∏–Ω –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è“£–∞ –∫–∏—Ä–±–µ–π—Ç."
)

def chat_once(prompt: str) -> str:
    # –ø–µ—Ä–µ–¥–∞—ë–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∫–∞–∫ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    history = [
        {"role": "user", "parts": [AITILCHI_INSTRUCTION]},
        {"role": "user", "parts": [prompt]}
    ]
    response = model.generate_content(history)
    return response.text

